{
  "contractName": "Conditional",
  "abi": [
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "conditionalTransactions",
      "outputs": [
        {
          "name": "inputHash",
          "type": "bytes32"
        },
        {
          "name": "bounty",
          "type": "uint256"
        },
        {
          "name": "conditionContract",
          "type": "address"
        },
        {
          "name": "from",
          "type": "address"
        },
        {
          "name": "cancelStartTimestamp",
          "type": "uint32"
        },
        {
          "name": "conditionData",
          "type": "bytes"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function",
      "signature": "0x1b3f93d9"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "CANCEL_TIMEOUT",
      "outputs": [
        {
          "name": "",
          "type": "uint32"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function",
      "signature": "0x3575ce64"
    },
    {
      "inputs": [
        {
          "name": "cancelTimeout",
          "type": "uint32"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor",
      "signature": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "id",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "name": "from",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "bounty",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "conditionContract",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "conditionData",
          "type": "bytes"
        },
        {
          "indexed": false,
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "functionSignature",
          "type": "bytes4"
        },
        {
          "indexed": false,
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "TxAdded",
      "type": "event",
      "signature": "0x13c8271d8d6e56d938e169d5255f345d4a264037553e31fc543b56139cb1b8a3"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "id",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "name": "executer",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "bounty",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "success",
          "type": "bool"
        }
      ],
      "name": "TxExecuted",
      "type": "event",
      "signature": "0xa28546ae523d79983823f379a9d9b4c28e564d47d7266e641b324f28209ce423"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "id",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "name": "canceler",
          "type": "address"
        }
      ],
      "name": "CancelInitiated",
      "type": "event",
      "signature": "0x4a8d9a156f93eda81bcf5255dfdcd9a3b153f204a16a37c3043e8d545dec3d82"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "id",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "name": "canceler",
          "type": "address"
        }
      ],
      "name": "Canceled",
      "type": "event",
      "signature": "0x5f32c817b1de98e681044c3d78ca791e6018e4c3b4f230e4d85bbcc3815989f3"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "functionSignature",
          "type": "bytes4"
        },
        {
          "name": "data",
          "type": "bytes"
        },
        {
          "name": "conditionContract",
          "type": "address"
        },
        {
          "name": "nonce",
          "type": "uint256"
        },
        {
          "name": "conditionData",
          "type": "bytes"
        }
      ],
      "name": "addTx",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function",
      "signature": "0x0873faf5"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "id",
          "type": "bytes32"
        },
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "functionSignature",
          "type": "bytes4"
        },
        {
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "executeTx",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function",
      "signature": "0x24d37a45"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "id",
          "type": "bytes32"
        }
      ],
      "name": "increaseBounty",
      "outputs": [],
      "payable": true,
      "stateMutability": "payable",
      "type": "function",
      "signature": "0xdb6b5e69"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "id",
          "type": "bytes32"
        }
      ],
      "name": "initiateCancelTx",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function",
      "signature": "0x50c8b71c"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "id",
          "type": "bytes32"
        }
      ],
      "name": "confirmCancelTx",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function",
      "signature": "0x65ae2414"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "id",
          "type": "bytes32"
        }
      ],
      "name": "isExecutable",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function",
      "signature": "0x9cf782cb"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b5060405160208061160f83398101604052516000805463ffffffff90921663ffffffff199092169190911790556115c38061004c6000396000f30060806040526004361061008d5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630873faf581146100925780631b3f93d91461010057806324d37a45146101d85780633575ce641461023c57806350c8b71c1461026a57806365ae2414146102825780639cf782cb1461029a578063db6b5e69146102c6575b600080fd5b6100fe6004803573ffffffffffffffffffffffffffffffffffffffff90811691602480357fffffffff000000000000000000000000000000000000000000000000000000001692604435808301939081013592606435909216916084359160a4359182019101356102d1565b005b34801561010c57600080fd5b50610118600435610491565b60408051878152602080820188905273ffffffffffffffffffffffffffffffffffffffff80881693830193909352918516606082015263ffffffff8416608082015260c060a0820181815284519183019190915283519192909160e084019185019080838360005b83811015610198578181015183820152602001610180565b50505050905090810190601f1680156101c55780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390f35b3480156101e457600080fd5b506100fe60048035906024803573ffffffffffffffffffffffffffffffffffffffff16916044357fffffffff0000000000000000000000000000000000000000000000000000000016916064359081019101356105a1565b34801561024857600080fd5b506102516109d7565b6040805163ffffffff9092168252519081900360200190f35b34801561027657600080fd5b506100fe6004356109e3565b34801561028e57600080fd5b506100fe600435610b21565b3480156102a657600080fd5b506102b2600435610e33565b604080519115158252519081900360200190f35b6100fe600435610f7b565b6000610343898989898080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050888888888080601f01602080910402602001604051908101604052809392919081815260200183838082843750611037945050505050565b90503373ffffffffffffffffffffffffffffffffffffffff1681600019167f13c8271d8d6e56d938e169d5255f345d4a264037553e31fc543b56139cb1b8a3348887878f8f8f8f604051808981526020018873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001857bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020018060200183810383528989828181526020019250808284379091018481038352858152602001905085858082843760405192018290039c50909a5050505050505050505050a3505050505050505050565b60016020818152600092835260409283902080548184015460028084015460038501546004860180548a516101009a8216159a909a027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff011693909304601f81018890048802890188019099528888529397929673ffffffffffffffffffffffffffffffffffffffff91821696918516957401000000000000000000000000000000000000000090950463ffffffff1694939092918301828280156105975780601f1061056c57610100808354040283529160200191610597565b820191906000526020600020905b81548152906001019060200180831161057a57829003601f168201915b5050505050905086565b600085815260016020818152604080842060028082015492517f7b7bc46e0000000000000000000000000000000000000000000000000000000081526004818101958652909201805495861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019095160460248201819052859473ffffffffffffffffffffffffffffffffffffffff90931693637b7bc46e93929091829160440190849080156106985780601f1061066d57610100808354040283529160200191610698565b820191906000526020600020905b81548152906001019060200180831161067b57829003601f168201915b50509250505060206040518083038186803b1580156106b657600080fd5b505afa1580156106ca573d6000803e3d6000fd5b505050506040513d60208110156106e057600080fd5b5051151561077557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602860248201527f436f6e646974696f6e616c236578656375746554783a20436f6e646974696f6e60448201527f206e6f74206d6574000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600087815260016020908152604091829020548251601f8701839004830281018301909352858352916107c09189918991899089908190840183828082843750611306945050505050565b1461085257604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602b60248201527f436f6e646974696f6e616c236578656375746554783a2043616c6c206461746160448201527f20697320696e76616c6964000000000000000000000000000000000000000000606482015290519081900360840190fd5b600087815260016020819052604082209081018054838355908390556002820180547fffffffffffffffffffffffff00000000000000000000000000000000000000001690556003820180547fffffffffffffffff0000000000000000000000000000000000000000000000001690559350906108d260048301826114b5565b50508573ffffffffffffffffffffffffffffffffffffffff16857c0100000000000000000000000000000000000000000000000000000000900485856040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808383808284378201915050925050506000604051808303816000875af160405190945033935085156108fc0292508591506000818181858888f1935050505015801561098d573d6000803e3d6000fd5b50604080518381528215156020820152815133928a927fa28546ae523d79983823f379a9d9b4c28e564d47d7266e641b324f28209ce423929081900390910190a350505050505050565b60005463ffffffff1681565b60008181526001602052604090206003015473ffffffffffffffffffffffffffffffffffffffff163314610a9e57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603560248201527f436f6e646974696f6e616c23696e69746961746543616e63656c54783a204f6e60448201527f6c792063726561746f722063616e2063616e63656c0000000000000000000000606482015290519081900360840190fd5b60008181526001602052604080822060030180547fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff16740100000000000000000000000000000000000000004263ffffffff160217905551339183917f4a8d9a156f93eda81bcf5255dfdcd9a3b153f204a16a37c3043e8d545dec3d829190a350565b60008181526001602052604081206003015473ffffffffffffffffffffffffffffffffffffffff163314610bdc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603460248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a204f6e6c60448201527f792063726561746f722063616e2063616e63656c000000000000000000000000606482015290519081900360840190fd5b5060008181526001602052604090206003015474010000000000000000000000000000000000000000900463ffffffff16801515610ca157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a2043616e60448201527f63656c20686173206e6f74206265656e20696e69746961746564000000000000606482015290519081900360840190fd5b6000544263ffffffff91821683019091161115610d4557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a2043616e60448201527f63656c20686173206e6f74206265656e20696e69746961746564000000000000606482015290519081900360840190fd5b6000828152600160208190526040808320909101549051339282156108fc02929190818181858888f19350505050158015610d84573d6000803e3d6000fd5b50600082815260016020819052604082208281559081018290556002810180547fffffffffffffffffffffffff00000000000000000000000000000000000000001690556003810180547fffffffffffffffff00000000000000000000000000000000000000000000000016905590610e0060048301826114b5565b5050604051339083907f5f32c817b1de98e681044c3d78ca791e6018e4c3b4f230e4d85bbcc3815989f390600090a35050565b600081815260016020818152604080842060028082015492517f7b7bc46e0000000000000000000000000000000000000000000000000000000081526004818101958652909201805495861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01909516046024820181905273ffffffffffffffffffffffffffffffffffffffff90921693637b7bc46e9390929091829160449091019084908015610f2b5780601f10610f0057610100808354040283529160200191610f2b565b820191906000526020600020905b815481529060010190602001808311610f0e57829003601f168201915b50509250505060206040518083038186803b158015610f4957600080fd5b505afa158015610f5d573d6000803e3d6000fd5b505050506040513d6020811015610f7357600080fd5b505192915050565b600081815260016020526040902054151561101d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f436f6e646974696f6e616c23696e637265617365426f756e74793a207478206460448201527f6f6573206e6f7420657869737400000000000000000000000000000000000000606482015290519081900360840190fd5b600090815260016020819052604090912001805434019055565b60008060003385604051602001808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401828152602001925050506040516020818303038152906040526040518082805190602001908083835b602083106110ec57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016110af565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018019909216911617905260408051929094018290039091206000818152600190925292902054919550501591506111d9905057604080517f08c379a0000000000000000000000000000000000000000000000000000000008152602060048201526024808201527f436f6e646974696f6e616c2361646454783a20747820616c726561647920657860448201527f6973747300000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b6111e4898989611306565b6040805160c08101825282815234602080830191825273ffffffffffffffffffffffffffffffffffffffff808c16848601908152336060860190815260006080870181815260a088018e81528c83526001808852999092208851815596519887019890985591516002860180549185167fffffffffffffffffffffffff00000000000000000000000000000000000000009283161790559051600386018054985163ffffffff1674010000000000000000000000000000000000000000027fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff929095169890921697909717969096169190911790945592518051949550919390926112f69260048501929101906114fc565b50929a9950505050505050505050565b6000838383604051602001808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260040182805190602001908083835b602083106113e057805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016113a3565b6001836020036101000a03801982511681845116808217855250505050505090500193505050506040516020818303038152906040526040518082805190602001908083835b6020831061146357805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101611426565b5181516020939093036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990911692169190911790526040519201829003909120979650505050505050565b50805460018160011615610100020316600290046000825580601f106114db57506114f9565b601f0160209004906000526020600020908101906114f9919061157a565b50565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061153d57805160ff191683800117855561156a565b8280016001018555821561156a579182015b8281111561156a57825182559160200191906001019061154f565b5061157692915061157a565b5090565b61159491905b808211156115765760008155600101611580565b905600a165627a7a72305820d2eb9881db6e98a008ac25c7c418b68ae0b005ced52109e1cb4de40ff96ebb2e0029",
  "deployedBytecode": "0x60806040526004361061008d5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630873faf581146100925780631b3f93d91461010057806324d37a45146101d85780633575ce641461023c57806350c8b71c1461026a57806365ae2414146102825780639cf782cb1461029a578063db6b5e69146102c6575b600080fd5b6100fe6004803573ffffffffffffffffffffffffffffffffffffffff90811691602480357fffffffff000000000000000000000000000000000000000000000000000000001692604435808301939081013592606435909216916084359160a4359182019101356102d1565b005b34801561010c57600080fd5b50610118600435610491565b60408051878152602080820188905273ffffffffffffffffffffffffffffffffffffffff80881693830193909352918516606082015263ffffffff8416608082015260c060a0820181815284519183019190915283519192909160e084019185019080838360005b83811015610198578181015183820152602001610180565b50505050905090810190601f1680156101c55780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390f35b3480156101e457600080fd5b506100fe60048035906024803573ffffffffffffffffffffffffffffffffffffffff16916044357fffffffff0000000000000000000000000000000000000000000000000000000016916064359081019101356105a1565b34801561024857600080fd5b506102516109d7565b6040805163ffffffff9092168252519081900360200190f35b34801561027657600080fd5b506100fe6004356109e3565b34801561028e57600080fd5b506100fe600435610b21565b3480156102a657600080fd5b506102b2600435610e33565b604080519115158252519081900360200190f35b6100fe600435610f7b565b6000610343898989898080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050888888888080601f01602080910402602001604051908101604052809392919081815260200183838082843750611037945050505050565b90503373ffffffffffffffffffffffffffffffffffffffff1681600019167f13c8271d8d6e56d938e169d5255f345d4a264037553e31fc543b56139cb1b8a3348887878f8f8f8f604051808981526020018873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001857bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020018060200183810383528989828181526020019250808284379091018481038352858152602001905085858082843760405192018290039c50909a5050505050505050505050a3505050505050505050565b60016020818152600092835260409283902080548184015460028084015460038501546004860180548a516101009a8216159a909a027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff011693909304601f81018890048802890188019099528888529397929673ffffffffffffffffffffffffffffffffffffffff91821696918516957401000000000000000000000000000000000000000090950463ffffffff1694939092918301828280156105975780601f1061056c57610100808354040283529160200191610597565b820191906000526020600020905b81548152906001019060200180831161057a57829003601f168201915b5050505050905086565b600085815260016020818152604080842060028082015492517f7b7bc46e0000000000000000000000000000000000000000000000000000000081526004818101958652909201805495861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff019095160460248201819052859473ffffffffffffffffffffffffffffffffffffffff90931693637b7bc46e93929091829160440190849080156106985780601f1061066d57610100808354040283529160200191610698565b820191906000526020600020905b81548152906001019060200180831161067b57829003601f168201915b50509250505060206040518083038186803b1580156106b657600080fd5b505afa1580156106ca573d6000803e3d6000fd5b505050506040513d60208110156106e057600080fd5b5051151561077557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602860248201527f436f6e646974696f6e616c236578656375746554783a20436f6e646974696f6e60448201527f206e6f74206d6574000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600087815260016020908152604091829020548251601f8701839004830281018301909352858352916107c09189918991899089908190840183828082843750611306945050505050565b1461085257604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602b60248201527f436f6e646974696f6e616c236578656375746554783a2043616c6c206461746160448201527f20697320696e76616c6964000000000000000000000000000000000000000000606482015290519081900360840190fd5b600087815260016020819052604082209081018054838355908390556002820180547fffffffffffffffffffffffff00000000000000000000000000000000000000001690556003820180547fffffffffffffffff0000000000000000000000000000000000000000000000001690559350906108d260048301826114b5565b50508573ffffffffffffffffffffffffffffffffffffffff16857c0100000000000000000000000000000000000000000000000000000000900485856040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808383808284378201915050925050506000604051808303816000875af160405190945033935085156108fc0292508591506000818181858888f1935050505015801561098d573d6000803e3d6000fd5b50604080518381528215156020820152815133928a927fa28546ae523d79983823f379a9d9b4c28e564d47d7266e641b324f28209ce423929081900390910190a350505050505050565b60005463ffffffff1681565b60008181526001602052604090206003015473ffffffffffffffffffffffffffffffffffffffff163314610a9e57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603560248201527f436f6e646974696f6e616c23696e69746961746543616e63656c54783a204f6e60448201527f6c792063726561746f722063616e2063616e63656c0000000000000000000000606482015290519081900360840190fd5b60008181526001602052604080822060030180547fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff16740100000000000000000000000000000000000000004263ffffffff160217905551339183917f4a8d9a156f93eda81bcf5255dfdcd9a3b153f204a16a37c3043e8d545dec3d829190a350565b60008181526001602052604081206003015473ffffffffffffffffffffffffffffffffffffffff163314610bdc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603460248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a204f6e6c60448201527f792063726561746f722063616e2063616e63656c000000000000000000000000606482015290519081900360840190fd5b5060008181526001602052604090206003015474010000000000000000000000000000000000000000900463ffffffff16801515610ca157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a2043616e60448201527f63656c20686173206e6f74206265656e20696e69746961746564000000000000606482015290519081900360840190fd5b6000544263ffffffff91821683019091161115610d4557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f436f6e646974696f6e616c23636f6e6669726d43616e63656c54783a2043616e60448201527f63656c20686173206e6f74206265656e20696e69746961746564000000000000606482015290519081900360840190fd5b6000828152600160208190526040808320909101549051339282156108fc02929190818181858888f19350505050158015610d84573d6000803e3d6000fd5b50600082815260016020819052604082208281559081018290556002810180547fffffffffffffffffffffffff00000000000000000000000000000000000000001690556003810180547fffffffffffffffff00000000000000000000000000000000000000000000000016905590610e0060048301826114b5565b5050604051339083907f5f32c817b1de98e681044c3d78ca791e6018e4c3b4f230e4d85bbcc3815989f390600090a35050565b600081815260016020818152604080842060028082015492517f7b7bc46e0000000000000000000000000000000000000000000000000000000081526004818101958652909201805495861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01909516046024820181905273ffffffffffffffffffffffffffffffffffffffff90921693637b7bc46e9390929091829160449091019084908015610f2b5780601f10610f0057610100808354040283529160200191610f2b565b820191906000526020600020905b815481529060010190602001808311610f0e57829003601f168201915b50509250505060206040518083038186803b158015610f4957600080fd5b505afa158015610f5d573d6000803e3d6000fd5b505050506040513d6020811015610f7357600080fd5b505192915050565b600081815260016020526040902054151561101d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f436f6e646974696f6e616c23696e637265617365426f756e74793a207478206460448201527f6f6573206e6f7420657869737400000000000000000000000000000000000000606482015290519081900360840190fd5b600090815260016020819052604090912001805434019055565b60008060003385604051602001808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401828152602001925050506040516020818303038152906040526040518082805190602001908083835b602083106110ec57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016110af565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018019909216911617905260408051929094018290039091206000818152600190925292902054919550501591506111d9905057604080517f08c379a0000000000000000000000000000000000000000000000000000000008152602060048201526024808201527f436f6e646974696f6e616c2361646454783a20747820616c726561647920657860448201527f6973747300000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b6111e4898989611306565b6040805160c08101825282815234602080830191825273ffffffffffffffffffffffffffffffffffffffff808c16848601908152336060860190815260006080870181815260a088018e81528c83526001808852999092208851815596519887019890985591516002860180549185167fffffffffffffffffffffffff00000000000000000000000000000000000000009283161790559051600386018054985163ffffffff1674010000000000000000000000000000000000000000027fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff929095169890921697909717969096169190911790945592518051949550919390926112f69260048501929101906114fc565b50929a9950505050505050505050565b6000838383604051602001808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260040182805190602001908083835b602083106113e057805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016113a3565b6001836020036101000a03801982511681845116808217855250505050505090500193505050506040516020818303038152906040526040518082805190602001908083835b6020831061146357805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101611426565b5181516020939093036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990911692169190911790526040519201829003909120979650505050505050565b50805460018160011615610100020316600290046000825580601f106114db57506114f9565b601f0160209004906000526020600020908101906114f9919061157a565b50565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061153d57805160ff191683800117855561156a565b8280016001018555821561156a579182015b8281111561156a57825182559160200191906001019061154f565b5061157692915061157a565b5090565b61159491905b808211156115765760008155600101611580565b905600a165627a7a72305820d2eb9881db6e98a008ac25c7c418b68ae0b005ced52109e1cb4de40ff96ebb2e0029",
  "sourceMap": "101:5809:1:-;;;1011:114;8:9:-1;5:2;;;30:1;27;20:12;5:2;1011:114:1;;;;;;;;;;;;;1088:14;:30;;;;;;-1:-1:-1;;1088:30:1;;;;;;;;;101:5809;;;;;;",
  "deployedSourceMap": "101:5809:1:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1131:636;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;939:65;;8:9:-1;5:2;;;30:1;27;20:12;5:2;-1:-1;939:65:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:100:-1;33:3;30:1;27:10;8:100;;;90:11;;;84:18;71:11;;;64:39;52:2;45:10;8:100;;;12:14;939:65:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1773:941;;8:9:-1;5:2;;;30:1;27;20:12;5:2;-1:-1;1773:941:1;;;;;;;;;;;;;;;;;;;;;;;;;;904:28;;8:9:-1;5:2;;;30:1;27;20:12;5:2;904:28:1;;;;;;;;;;;;;;;;;;;;;;;3127:402;;8:9:-1;5:2;;;30:1;27;20:12;5:2;-1:-1;3127:402:1;;;;;3535:818;;8:9:-1;5:2;;;30:1;27;20:12;5:2;-1:-1;3535:818:1;;;;;4359:256;;8:9:-1;5:2;;;30:1;27;20:12;5:2;-1:-1;4359:256:1;;;;;;;;;;;;;;;;;;;;;;;2720:401;;;;;;1131:636;1360:10;1373:168;1403:2;1419:17;1450:4;;1373:168;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1468:17;1499:5;1518:13;;1373:168;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1373:16:1;;-1:-1:-1;;;;;1373:168:1:i;:::-;1360:181;;1594:10;1557:203;;1578:2;1557:203;;;;1618:9;1641:17;1672:13;;1699:2;1715:17;1746:4;;1557:203;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1557:203:1;;;;;;;;;;;;;;-1:-1:-1;1557:203:1;;-1:-1:-1;;;;;;;;;;;1557:203:1;1131:636;;;;;;;;;:::o;939:65::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;1773:941::-;2399:14;1971:27;;;:23;:27;;;;;;;;:45;;;;;1944:135;;;;;2037:41;1944:135;;;;;;2037:41;;;1944:135;;;;;;1971:45;1944:135;1971:27;1944:135;;;;;;;;;;;2399:14;;1971:45;;;;;1944:92;;2037:41;1944:135;;;;;;;2037:41;;1944:135;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1944:135:1;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;1944:135:1;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;1944:135:1;1923:222;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2283:27;;;;:23;:27;;;;;;;;;:37;2176:103;;;;;;;;;;;;;;;;;;;;2283:37;2176:103;;2206:2;;2226:17;;2261:4;;;;;;2176:103;;2261:4;;;;2176:103;;-1:-1:-1;2176:12:1;;-1:-1:-1;;;;;2176:103:1:i;:::-;:144;2155:234;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2416:27;;;;:23;:27;;;;;;;:34;;;;;2460;;;;;;;;;;;;;;;;;;;;;;;;;2416;-1:-1:-1;2416:27:1;2460:34;;;;2416:27;2460:34;:::i;:::-;;;2520:2;:7;;2528:17;2520:32;;;2547:4;;2520:32;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2563:27;;2520:32;;-1:-1:-1;2563:10:1;;-1:-1:-1;2563:27:1;;;;;-1:-1:-1;2583:6:1;;-1:-1:-1;2563:27:1;;;;2583:6;2563:10;:27;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;-1:-1;2606:101:1;;;;;;;;;;;;;;;2646:10;;2630:2;;2606:101;;;;;;;;;;;1773:941;;;;;;;:::o;904:28::-;;;;;;:::o;3127:402::-;3231:27;;;;:23;:27;;;;;:32;;;:46;:32;3267:10;3231:46;3210:146;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3367:27;;;;:23;:27;;;;;;:48;;:74;;;;;3425:15;3367:74;;;;;;3457:65;3502:10;;3367:27;;3457:65;;3367:27;3457:65;3127:402;:::o;3535:818::-;3772:27;3638;;;:23;:27;;;;;:32;;;:46;:32;3674:10;3638:46;3617:145;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;3802:27:1;;;;:23;:27;;;;;:48;;;;;;;;3881:25;;;3860:130;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4044:14;;4062:15;4044:14;;;;4021:37;;:56;;;;;4000:161;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4192:27;;;;:23;:27;;;;;;;;:34;;;;4172:55;;:10;;:55;;;;;4192:34;4172:55;;4192:27;4172:55;4192:34;4172:10;:55;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;-1:-1;4245:27:1;;;;:23;:27;;;;;;;4238:34;;;;;;;;;;;;;;;;;;;;;;;;;;;4245:27;4238:34;;;;4245:27;4238:34;:::i;:::-;-1:-1:-1;;4288:58:1;;4326:10;;4310:2;;4288:58;;;;;3535:818;;:::o;4359:256::-;4454:4;4504:27;;;:23;:27;;;;;;;;:45;;;;;4481:127;;;;;4566:41;4481:127;;;;;;4566:41;;;4481:127;;;;;;4504:45;4481:127;4504:27;4481:127;;;;;;;;;;;4504:45;;;;;4481:84;;4566:41;;4481:127;;;;;;;;;4566:41;;4481:127;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;4481:127:1;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4481:127:1;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4481:127:1;;4359:256;-1:-1:-1;;4359:256:1:o;2720:401::-;2887:1;2838:27;;;2879:10;2838:27;;;;;:37;:51;;2817:143;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3068:27;;;;:23;:27;;;;;;;;:34;;;3105:9;3068:46;3031:83;;2720:401::o;4952:956::-;5178:7;5201:10;5484:17;5271:10;5299:5;5237:81;;;;;;;;;;;;;;;;;;;;;;;;;;;49:4:-1;39:7;30;26:21;22:32;13:7;6:49;5237:81:1;;;5214:114;;;;;;;;;;;;;36:153:-1;66:2;58:11;;36:153;;176:10;;164:23;;139:12;;;;;98:2;89:12;;;;114;36:153;;;299:10;344;;263:2;259:12;;;254:3;250:22;246:30;;311:9;;295:26;;;340:21;;377:20;365:33;;5214:114:1;;;;;;;;;;;;;-1:-1:-1;5360:27:1;;;274:1:-1;5360:27:1;;;;;;:37;5214:114;;-1:-1:-1;;5360:51:1;;-1:-1:-1;5339:134:1;;-1:-1:-1;5339:134:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5504:87;5530:2;5546:17;5577:4;5504:12;:87::i;:::-;5632:249;;;;;;;;;;;5752:9;5632:249;;;;;;;;;;;;;;;;;5781:10;5632:249;;;;;;-1:-1:-1;5632:249:1;;;;;;;;;;;;5602:27;;;:23;:27;;;;;;;:279;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5632:249;5602:279;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5484:107;;-1:-1:-1;5632:249:1;;5602:27;;:279;;;;;;;;;;:::i;:::-;-1:-1:-1;5899:2:1;;4952:956;-1:-1:-1;;;;;;;;;;4952:956:1:o;4621:325::-;4769:7;4856:2;4876:17;4911:4;4822:107;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;36:153:-1;66:2;58:11;;36:153;;176:10;;164:23;;139:12;;;;;98:2;89:12;;;;114;36:153;;;274:1;267:3;263:2;259:12;254:3;250:22;246:30;315:4;311:9;305:3;299:10;295:26;356:4;350:3;344:10;340:21;389:7;380;377:20;372:3;365:33;3:399;;;4822:107:1;;;;;;;;;;;;;49:4:-1;39:7;30;26:21;22:32;13:7;6:49;4822:107:1;;;4799:140;;;;;;;;;;;;;36:153:-1;66:2;58:11;;36:153;;176:10;;164:23;;139:12;;;;;98:2;89:12;;;;114;36:153;;;299:10;344;;263:2;259:12;;;;254:3;250:22;246:30;;311:9;;295:26;;;340:21;;377:20;;;;365:33;;4799:140:1;;;;;;;;;;;;-1:-1:-1;;;;;;;4621:325:1:o;101:5809::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;101:5809:1;;;-1:-1:-1;101:5809:1;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;:::o",
  "source": "pragma solidity 0.4.25;\npragma experimental \"v0.5.0\";\n\nimport { Condition } from \"./Condition.sol\";\n\ncontract Conditional {\n    event TxAdded(\n        bytes32 indexed id,\n        address indexed from,\n        uint256 bounty,\n        address conditionContract,\n        bytes conditionData,\n        address to,\n        bytes4 functionSignature,\n        bytes data\n    );\n\n    event TxExecuted(\n        bytes32 indexed id,\n        address indexed executer,\n        uint256 bounty,\n        bool success\n    );\n\n    event CancelInitiated(\n        bytes32 indexed id,\n        address indexed canceler\n    );\n\n    event Canceled(\n        bytes32 indexed id,\n        address indexed canceler\n    );\n\n    struct ConditionalTx {\n        bytes32 inputHash;\n        uint256 bounty;\n        address conditionContract;\n        address from;\n        uint32 cancelStartTimestamp;\n        bytes conditionData;\n    }\n\n    uint32 public CANCEL_TIMEOUT;\n\n    mapping (bytes32 => ConditionalTx) public conditionalTransactions;\n\n    constructor(\n        uint32 cancelTimeout\n    )\n        public\n    {\n        CANCEL_TIMEOUT = cancelTimeout;\n    }\n\n    function addTx(\n        address to,\n        bytes4 functionSignature,\n        bytes data,\n        address conditionContract,\n        uint256 nonce,\n        bytes conditionData\n    )\n        external\n        payable\n    {\n        bytes32 id = addConditionalTx(\n            to,\n            functionSignature,\n            data,\n            conditionContract,\n            nonce,\n            conditionData\n        );\n\n        emit TxAdded(\n            id,\n            msg.sender,\n            msg.value,\n            conditionContract,\n            conditionData,\n            to,\n            functionSignature,\n            data\n        );\n    }\n\n    function executeTx(\n        bytes32 id,\n        address to,\n        bytes4 functionSignature,\n        bytes data\n    )\n        external\n    {\n        require(\n            Condition(\n                conditionalTransactions[id].conditionContract\n            ).isMet(conditionalTransactions[id].conditionData),\n            \"Conditional#executeTx: Condition not met\"\n        );\n        require(\n            getInputHash(\n                to,\n                functionSignature,\n                data\n            ) == conditionalTransactions[id].inputHash,\n            \"Conditional#executeTx: Call data is invalid\"\n        );\n        uint256 bounty = conditionalTransactions[id].bounty;\n        delete conditionalTransactions[id];\n\n        bool success = to.call(functionSignature, data);\n\n        msg.sender.transfer(bounty);\n\n        emit TxExecuted(\n            id,\n            msg.sender,\n            bounty,\n            success\n        );\n    }\n\n    function increaseBounty(\n        bytes32 id\n    )\n        external\n        payable\n    {\n        require(\n            conditionalTransactions[id].inputHash != bytes32(0),\n            \"Conditional#increaseBounty: tx does not exist\"\n        );\n\n        // Safe because total supply of ETH fits in uint256\n        conditionalTransactions[id].bounty = conditionalTransactions[id].bounty + msg.value;\n    }\n\n    function initiateCancelTx(\n        bytes32 id\n    )\n        external\n    {\n        require(\n            conditionalTransactions[id].from == msg.sender,\n            \"Conditional#initiateCancelTx: Only creator can cancel\"\n        );\n\n        conditionalTransactions[id].cancelStartTimestamp = uint32(block.timestamp);\n\n        emit CancelInitiated(\n            id,\n            msg.sender\n        );\n    }\n\n    function confirmCancelTx(\n        bytes32 id\n    )\n        external\n    {\n        require(\n            conditionalTransactions[id].from == msg.sender,\n            \"Conditional#confirmCancelTx: Only creator can cancel\"\n        );\n        uint32 cancelStartTimestamp = conditionalTransactions[id].cancelStartTimestamp;\n        require(\n            cancelStartTimestamp != 0,\n            \"Conditional#confirmCancelTx: Cancel has not been initiated\"\n        );\n        require(\n            cancelStartTimestamp + CANCEL_TIMEOUT <= block.timestamp,\n            \"Conditional#confirmCancelTx: Cancel has not been initiated\"\n        );\n\n        msg.sender.transfer(conditionalTransactions[id].bounty);\n\n        delete conditionalTransactions[id];\n\n        emit Canceled(\n            id,\n            msg.sender\n        );\n    }\n\n    function isExecutable(\n        bytes32 id\n    )\n        external\n        view\n        returns (bool)\n    {\n        return Condition(\n            conditionalTransactions[id].conditionContract\n        ).isMet(conditionalTransactions[id].conditionData);\n    }\n\n    function getInputHash(\n        address to,\n        bytes4 functionSignature,\n        bytes data\n    )\n        private\n        pure\n        returns (bytes32)\n    {\n        return keccak256(\n            abi.encodePacked(\n                to,\n                functionSignature,\n                data\n            )\n        );\n    }\n\n    function addConditionalTx(\n        address to,\n        bytes4 functionSignature,\n        bytes data,\n        address conditionContract,\n        uint256 nonce,\n        bytes conditionData\n    )\n        private\n        returns (bytes32)\n    {\n        bytes32 id = keccak256(\n            abi.encodePacked(\n                msg.sender,\n                nonce\n            )\n        );\n\n        require(\n            conditionalTransactions[id].inputHash == bytes32(0),\n            \"Conditional#addTx: tx already exists\"\n        );\n\n        bytes32 inputHash = getInputHash(\n            to,\n            functionSignature,\n            data\n        );\n\n        conditionalTransactions[id] = ConditionalTx({\n            inputHash: inputHash,\n            conditionContract: conditionContract,\n            bounty: msg.value,\n            from: msg.sender,\n            conditionData: conditionData,\n            cancelStartTimestamp: 0\n        });\n\n        return id;\n    }\n}\n",
  "networks": {
    "42": {
      "events": {},
      "links": {},
      "address": "0x08167A59c490739354546BBf731664320E534528",
      "transactionHash": "0x3c542c4cfc7dff84b7e224f3be9be5edae9d4c10f7f4daf3da9753754a60063e"
    }
  },
  "schemaVersion": "3.0.0-beta.1",
  "updatedAt": "2018-10-07T02:51:17.126Z"
}
